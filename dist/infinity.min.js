(function(a){a.infinity=b=>{let c=!0;if(this.go=a=>(c=!1,this.settings.url=a||this.settings.url,this._search(),this),this.more=()=>(this.settings.first+=this.settings.count,this._search(),this),this._search=()=>{let b=this.settings.url.replace("{first}",this.settings.first).replace("{count}",this.settings.count+1);a.ajax({url:b,dataType:this.settings.dataType}).fail((a,b,c)=>{"undefined"!=typeof this.settings.error&&this.settings.error.call(this,a,b,c)}).done((b,c,d)=>{let e=[],f=!0;a.isArray(b)?e=b:a.isArray(b.data)&&(e=b.data),"json"===this.settings.dataType&&(f=!!(e.length>this.settings.count),f&&e.pop()),"undefined"!=typeof this.settings.success&&this.settings.success.call(this,e,c,d),"undefined"==typeof this.settings.done||f||this.settings.done.call(this)})},this.settings=a.extend({},{url:"",dataType:"html",auto:!1,first:0,count:10,fail:void 0,success:void 0,done:void 0},b),!0===this.settings.auto){let b=a(window);b.scroll(()=>{b.scrollTop()+b.height()===a(document).height()&&(c?this.go():this.more())})}return this}})(jQuery);